---
alwaysApply: true
description: "Arquitetura Hexagonal (Ports & Adapters) para integra√ß√µes externas"
globs:
  - "src/application/ports/**"
  - "src/infrastructure/adapters/**"
  - "src/application/use-cases/**"
---

# üî∑ ARQUITETURA HEXAGONAL - PORTS & ADAPTERS

## Quando Aplicar

‚úÖ **SIM** para:
- Integra√ß√µes com APIs externas (YouTube, TikTok, Stripe)
- Acesso a banco de dados
- Providers de IA (Veo, Runway, OpenAI)
- Servi√ßos de email/SMS

‚ùå **N√ÉO** para:
- Utilit√°rios (format-date.ts, capitalize.ts)
- Componentes UI simples
- Helpers internos

---

## Padr√£o Obrigat√≥rio

### 1. Definir Port (Interface)
```typescript
// src/application/ports/secondary/IYouTubeGateway.ts
export interface IYouTubeGateway {
  publishVideo(video: Video): Promise<Result<PublishResult>>;
}
```

### 2. Implementar Adapter
```typescript
// src/infrastructure/adapters/secondary/gateways/YouTubeApiGateway.ts
export class YouTubeApiGateway implements IYouTubeGateway {
  async publishVideo(video: Video): Promise<Result<PublishResult>> {
    // Implementa√ß√£o real
  }
}
```

### 3. Usar no Use Case
```typescript
// src/application/use-cases/PublishVideoUseCase.ts
export class PublishVideoUseCase {
  constructor(private gateway: IYouTubeGateway) {} // ‚úÖ Depende da INTERFACE
  
  async execute() {
    await this.gateway.publishVideo(video); // ‚úÖ N√£o sabe se √© real ou mock
  }
}
```

---

## Checklist de Code Review

- [ ] Use Case depende de Port, n√£o de Adapter?
- [ ] Port est√° em `src/application/ports/`?
- [ ] Adapter est√° em `src/infrastructure/adapters/`?
- [ ] Existe Mock Adapter para testes?
- [ ] Inje√ß√£o de depend√™ncias configurada?

---

**Consulte:** `docs/adr/006-arquitetura-hexagonal.md`